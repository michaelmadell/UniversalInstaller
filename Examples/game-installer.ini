; Example: Game Installer
; Installer for a game with DirectX prerequisites and save game management

[Setup]
AppName=Epic Adventure Game
AppVersion=1.3.0
AppPublisher=Game Studios Ltd
AppPublisherURL=https://www.gamestudios.com
DefaultDirName={pf}\EpicAdventure
DefaultGroupName=Epic Adventure
OutputBaseFilename=EpicAdventureSetup
SetupIconFile=game.ico
WizardImageFile=wizard-large.bmp
WizardSmallImageFile=wizard-small.bmp
Compression=yes
SolidCompression=yes
LicenseFile=eula.txt
ShowLicense=yes
PrivilegesRequired=no
DisableWelcomePage=no

[Files]
; Game executable
Source=EpicAdventure.exe
DestDir={app}

; Game data files
Source=Data\*.*
DestDir={app}\Data
Recurse=yes

; Game assets
Source=Assets\*.*
DestDir={app}\Assets
Recurse=yes

; Configuration files
Source=Config\*.cfg
DestDir={app}\Config

; DLL dependencies
Source=*.dll
DestDir={app}

; DirectX redistributable
Source=redist\directx\*.*
DestDir={tmp}\directx
Components=directx

; Visual C++ redistributable
Source=redist\vcredist\*.exe
DestDir={tmp}\vcredist
Components=vcruntime

; Documentation
Source=manual.pdf
DestDir={app}\Docs
Components=docs

; Soundtrack (optional)
Source=Soundtrack\*.mp3
DestDir={app}\Soundtrack
Components=soundtrack

[Dirs]
; Create save game directories
Name={userdocs}\EpicAdventure\SaveGames
Name={userdocs}\EpicAdventure\Screenshots
Name={userdocs}\EpicAdventure\Replays
Name={localappdata}\EpicAdventure\Cache
Name={app}\Mods

[Icons]
; Desktop shortcut
Name={userdesktop}\Epic Adventure
Filename={app}\EpicAdventure.exe
WorkingDir={app}
IconFilename={app}\game.ico
Tasks=desktopicon

; Start menu shortcuts
Name={group}\Epic Adventure
Filename={app}\EpicAdventure.exe
WorkingDir={app}
IconFilename={app}\game.ico

Name={group}\Game Manual
Filename={app}\Docs\manual.pdf
Components=docs

Name={group}\Save Games Folder
Filename={userdocs}\EpicAdventure\SaveGames

Name={group}\Uninstall Epic Adventure
Filename={app}\uninstall.exe

[Registry]
; Game registration
Root=HKCU
Subkey=Software\GameStudios\EpicAdventure
ValueName=InstallPath
ValueType=string
ValueData={app}

Root=HKCU
Subkey=Software\GameStudios\EpicAdventure
ValueName=Version
ValueType=string
ValueData=1.3.0

; Save game location
Root=HKCU
Subkey=Software\GameStudios\EpicAdventure
ValueName=SaveGamePath
ValueType=string
ValueData={userdocs}\EpicAdventure\SaveGames

; Graphics settings (default to high)
Root=HKCU
Subkey=Software\GameStudios\EpicAdventure\Graphics
ValueName=Quality
ValueType=string
ValueData=High

Root=HKCU
Subkey=Software\GameStudios\EpicAdventure\Graphics
ValueName=Resolution
ValueType=string
ValueData=1920x1080

Root=HKCU
Subkey=Software\GameStudios\EpicAdventure\Graphics
ValueName=Fullscreen
ValueType=dword
ValueData=1

[Run]
; Install DirectX
Filename={tmp}\directx\DXSETUP.exe
Parameters=/silent
Description=Installing DirectX
Components=directx

; Install Visual C++ Runtime
Filename={tmp}\vcredist\vcredist_x64.exe
Parameters=/install /quiet /norestart
Description=Installing Visual C++ Runtime
Components=vcruntime

; Create default configuration
Filename={app}\EpicAdventure.exe
Parameters=-createconfig
Description=Creating default configuration
Flags=runhidden

; Launch game (optional)
Filename={app}\EpicAdventure.exe
Description=Launch Epic Adventure now
Flags=postinstall

[Components]
Name=game
Description=Game files (required)
Fixed=yes

Name=directx
Description=DirectX Runtime
Fixed=yes

Name=vcruntime
Description=Visual C++ Runtime
Fixed=yes

Name=docs
Description=Game manual and documentation

Name=soundtrack
Description=Original soundtrack MP3s (150 MB)

[Tasks]
Name=desktopicon
Description=Create a desktop shortcut
Checked=yes

Name=quicklaunch
Description=Create a Quick Launch icon
Checked=no

Name=associate
Description=Associate .sav files with the game
Checked=yes
